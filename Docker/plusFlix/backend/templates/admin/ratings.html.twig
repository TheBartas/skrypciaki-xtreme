{% extends "admin/base.html.twig" %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/admin/admin.page.css') }}">
{% endblock %}

{% block body %}
    <div id="main_content">
        <div class="heading">
            <h1>Oceny</h1>
        </div>

        <form method="get" action="{{ path('admin_rating_search') }}">
            <div class="search-container">
                <input
                    class="input-research"
                    type="text"
                    name="q"
                    value="{{ app.request.query.get('q') }}"
                    placeholder="Szukaj"
                >

                <button class="search-btn" type="submit">
                    <img src="https://cdn-icons-png.flaticon.com/256/2866/2866321.png" alt="search">
                </button>
            </div>
        </form>

        <div id="table-wraper">
            <table class="admin-table">
                <thead>
                    <tr>
                        <th>Tytuł dzieła</th>
                        <th>Ocena</th>
                        <th>Komentarz</th>
                        <th id="th-action">Akcje</th>
                    </tr>
                </thead>
                <tbody>
                    {% for rating in ratings %}
                        <tr>
                            <td>{{ rating.name }}</td>
                            <td>{{ rating.rating }}</td>
                            {% if rating.comment %}
                                <td>{{ rating.comment }}</td>
                            {% else %}
                                <td>NULL</td>
                            {% endif %}
                            <td>
                                <a href="#"
                                    class="editratingLink"
                                    data-id-rating="{{ rating.rat_ID }}"
                                    data-name="{{ rating.name }}"
                                    data-rating="{{ rating.rating }}"
                                    data-comment="{{ rating.comment }}">Edytuj</a>
                                <span class="action-separator">|</span>
                                <a href="#"
                                    class="deleteratingLink"
                                    data-id-rating="{{ rating.rat_ID }}">Usuń</a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    {% include 'admin/modals/ratingsModal.html.twig'%}

    {% block javascript %}
        <script src="{{ asset('js/admin/admin.ratingsModal.js') }}"></script>
    {% endblock %}
{% endblock %}
